<div class="min-h-screen bg-gray-50">
  <!-- Header -->
  <header class="bg-white border-b">
    <div class="container mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center space-x-4">
        <a routerLink="/student/dashboard">
          <button class="p-2 rounded hover:bg-gray-100 flex items-center text-gray-600">
            <!-- ArrowLeft SVG -->
            <svg class="h-4 w-4 mr-2" fill="none" stroke="currentColor" stroke-width="2"
                 viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
            Volver al Dashboard
          </button>
        </a>
        <div class="flex items-center space-x-2">
          <div class="bg-gradient-to-r from-purple-600 to-blue-600 p-2 rounded-lg">
            <!-- Users SVG -->
            <svg class="h-6 w-6 text-white" fill="none" stroke="currentColor" stroke-width="2"
                 viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
              <path d="M17 21v-2a4 4 0 0 0-3-3.87"></path>
              <path d="M7 21v-2a4 4 0 0 1 3-3.87"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </div>
          <div>
            <h1 class="text-xl font-bold">Encontrar Mentor</h1>
            <p class="text-sm text-gray-600">Conecta con mentores en línea</p>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container mx-auto px-4 py-8 max-w-6xl">
    <ng-container *ngIf="!selectedLanguage; else mentorsList">
      <!-- Language Selection -->
      <div class="space-y-6">
        <div class="text-center">
          <h2 class="text-2xl font-bold mb-2">¿En qué lenguaje necesitas ayuda?</h2>
          <p class="text-gray-600">Selecciona un lenguaje para ver los mentores disponibles</p>
        </div>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div *ngFor="let language of languages"
               class="bg-white rounded shadow cursor-pointer transition-all hover:shadow-md hover:scale-105"
               (click)="setLanguage(language.id)">
            <div class="p-6 text-center">
              <div [ngClass]="language.color + ' w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3'">
                <span class="text-white text-lg font-bold">{{ language.icon }}</span>
              </div>
              <h3 class="font-semibold mb-2">{{ language.name }}</h3>
              <div class="flex items-center justify-center space-x-1">
                <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                <span class="text-sm text-gray-600">{{ language.mentorsOnline }} en línea</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>

    <ng-template #mentorsList>
      <!-- Mentors List -->
      <div class="space-y-6">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-4">
            <button
              type="button"
              class="flex items-center space-x-2 border px-3 py-2 rounded"
              (click)="clearLanguage()"
            >
              <!-- ArrowLeft SVG -->
              <svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="2"
                   viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="15 18 9 12 15 6"></polyline>
              </svg>
              <span>Cambiar Lenguaje</span>
            </button>
            <div class="flex items-center space-x-3">
              <div [ngClass]="selectedLanguageData?.color + ' w-8 h-8 rounded-full flex items-center justify-center'">
                <span class="text-white text-sm font-bold">{{ selectedLanguageData?.icon }}</span>
              </div>
              <div>
                <h2 class="text-xl font-bold">{{ selectedLanguageData?.name }}</h2>
                <p class="text-sm text-gray-600">{{ availableMentors.length }} mentores en línea</p>
              </div>
            </div>
          </div>
        </div>
        <ng-container *ngIf="availableMentors.length > 0; else noMentors">
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div *ngFor="let mentor of availableMentors" class="bg-white rounded shadow hover:shadow-lg transition-shadow">
              <div class="p-6 pb-0 flex items-center space-x-3">
                <div class="h-12 w-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-lg font-bold">
                  {{ mentor.avatar }}
                </div>
                <div class="flex-1">
                  <div class="text-lg font-bold flex items-center">
                    {{ mentor.name }}
                    <div class="w-3 h-3 bg-green-500 rounded-full ml-2"></div>
                  </div>
                  <div class="text-gray-500">{{ mentor.experience }} de experiencia</div>
                </div>
              </div>
              <div class="p-6 pt-2 space-y-4">
                <p class="text-sm text-gray-600">{{ mentor.description }}</p>
                <div class="flex items-center space-x-4">
                  <div class="flex items-center space-x-1">
                    <!-- Star SVG -->
                    <svg class="h-4 w-4 text-yellow-500" fill="none" stroke="currentColor" stroke-width="2"
                         viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                      <polygon points="12 2 15 8.6 22 9.2 17 14 18.2 21 12 17.8 5.8 21 7 14 2 9.2 9 8.6 12 2"></polygon>
                    </svg>
                    <span class="font-semibold">{{ mentor.rating }}</span>
                  </div>
                  <div class="text-sm text-gray-600">{{ mentor.totalSessions }} sesiones</div>
                </div>
                <div class="space-y-2">
                  <p class="text-sm font-medium">Especialidades:</p>
                  <div class="flex flex-wrap gap-1">
                    <span *ngFor="let specialty of mentor.specialties"
                          class="border px-2 py-0.5 rounded text-xs bg-gray-100">
                      {{ specialty }}
                    </span>
                  </div>
                </div>
                <button
                  type="button"
                  class="w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-2 rounded font-semibold flex items-center justify-center"
                  (click)="handleContactMentor(mentor.teamsId, mentor.name)"
                >
                  <!-- MessageCircle SVG -->
                  <svg class="h-4 w-4 mr-2" fill="none" stroke="currentColor" stroke-width="2"
                       viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2z"></path>
                  </svg>
                  Contactar en Teams
                  <!-- ExternalLink SVG -->
                  <svg class="h-4 w-4 ml-2" fill="none" stroke="currentColor" stroke-width="2"
                       viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 13v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                    <polyline points="15 3 21 3 21 9"></polyline>
                    <line x1="10" y1="14" x2="21" y2="3"></line>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </ng-container>
        <ng-template #noMentors>
          <div class="bg-white rounded shadow p-8 text-center">
            <div class="flex items-center justify-center mb-4">
              <!-- Users SVG -->
              <svg class="h-12 w-12 text-gray-400" fill="none" stroke="currentColor" stroke-width="2"
                   viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                <path d="M17 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M7 21v-2a4 4 0 0 1 3-3.87"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
            </div>
            <h3 class="text-lg font-semibold mb-2">No hay mentores en línea</h3>
            <p class="text-gray-600 mb-4">
              No hay mentores disponibles para {{ selectedLanguageData?.name }} en este momento.
            </p>
            <button type="button" class="border px-3 py-2 rounded" (click)="clearLanguage()">Probar otro lenguaje</button>
          </div>
        </ng-template>
      </div>
    </ng-template>
  </div>
</div>
